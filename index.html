<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8" />
<title>Mandarin TTS Mini Game</title>

<style>
body {
  font-family: "SimSun", serif;
  background: linear-gradient(135deg, #ffecd2, #fcb69f);
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100vh;
}

.card {
  width: 820px;
  background: white;
  border-radius: 18px;
  padding: 30px;
  box-shadow: 0 10px 30px rgba(0,0,0,0.2);
}

.header {
  font-size: 22px;
  font-weight: bold;
  margin-bottom: 10px;
  color: #d35400;
}

.text-box {
  font-size: 28px;
  line-height: 1.7;
  margin: 20px 0;
}

.hidden {
  display: none;
}

.highlight {
  background: #ffeaa7;
  border-radius: 6px;
  padding: 2px 4px;
}

.controls button, select {
  font-size: 16px;
  padding: 8px 14px;
  margin: 6px;
  border-radius: 10px;
  border: none;
  cursor: pointer;
}

.controls button {
  background: #ff7675;
  color: white;
}

.controls button:hover {
  background: #d63031;
}

.nav button {
  background: #0984e3;
}

.nav button:hover {
  background: #0652dd;
}
</style>
</head>

<body>

<div class="card">
  <div class="header" id="title"></div>

  <div class="text-box" id="text"></div>

  <div class="controls">
    <button onclick="play()">▶ Play</button>
    <button onclick="pause()">⏸ Pause</button>
    <button onclick="toggleText()">显示汉字 / 隐藏汉字</button>

    <select id="rate" onchange="changeRate()">
      <option value="0.75">0.75x</option>
      <option value="1" selected>1x</option>
      <option value="1.25">1.25x</option>
      <option value="1.5">1.5x</option>
    </select>
  </div>

  <div class="controls nav">
    <button onclick="prev()">⬅ Prev</button>
    <button onclick="next()">Next ➡</button>
  </div>
</div>

<script>
const pages = [
{
  title: "段落一：学习汉语的经验",
  text: "我学习汉语已经两年了。开始的时候，我觉得汉语很难，特别是写汉字和说四声。但是，我的老师很好，她帮助我很多。我每天练习听力和口语，还会看一些中国电影。现在，我已经可以跟中国朋友聊天，去饭店点菜，或者问路。虽然有时候还会说错，但是我不怕，因为只有多说才能进步。学习汉语让我更了解中国文化，也认识了很多新朋友。"
},
{
  title: "段落二：我住的城市",
  text: "我住在一个不太大的城市，这里很安静，也很干净。城市里有一个大湖，周末很多人去那里运动或者休息。虽然这里没有很多高楼，但是生活非常方便。超市、医院、学校都在我家附近。人们也很友好，总是互相帮助。我最喜欢的地方是市中心的那个老书店，里面有很多有意思的书。我觉得住在这里很舒服，压力不大，每天都可以享受简单的生活。"
},
{
  title: "段落三：未来的计划",
  text: "关于未来，我有几个简单的计划。首先，我想继续提高我的汉语水平，希望明年能通过HSK5考试。然后，我打算找一份跟国际贸易有关的工作，因为我对经济很有兴趣。在工作之前，我还想去中国旅行一次，看看北京、上海那些大城市。当然，我也希望多陪陪家人，因为他们一直支持我。虽然这些计划不容易，但是我会努力，一步一步地实现它们。"
},
{
  title: "段落四：健康的生活习惯",
  text: "我认为健康的生活习惯非常重要。为了保持健康，我每天早睡早起，很少晚上出去玩。在饮食方面，我多吃蔬菜和水果，少喝太甜的饮料。每个星期，我至少运动三次，比如跑步或者游泳。运动以后，我总是感觉身体很轻松，心情也很好。另外，我也会注意休息，工作太累的时候，就听听音乐，跟朋友说话。健康不是一件难事，只要每天坚持做对的事情。"
},
{
  title: "段落五：我的周末生活",
  text: "我的周末生活很简单，但是很有意思。星期六早上，我常常去市场买水果和菜。下午，我喜欢跟朋友一起喝咖啡、聊天。有时候，我们也去看电影或者去公园散步。星期天，我通常在家休息，听音乐或者看书。如果天气好，我会骑自行车去附近的小山。晚上，我常常给父母打电话，告诉他们我最近的生活。虽然周末时间不长，但是对我来说非常重要，因为我可以放松自己，做喜欢的事情。"
}
];

let index = 0;
let utterance;
let paused = false;
let currentChar = 0;
let showText = true;

function render() {
  document.getElementById("title").innerText = pages[index].title;
  document.getElementById("text").innerText = pages[index].text;
}

function play() {
  if (speechSynthesis.speaking && paused) {
    speechSynthesis.resume();
    paused = false;
    return;
  }

  utterance = new SpeechSynthesisUtterance(pages[index].text.slice(currentChar));
  utterance.lang = "zh-CN";
  utterance.rate = document.getElementById("rate").value;

  utterance.onboundary = (e) => {
    currentChar += e.charLength;
  };

  utterance.onend = () => {
    currentChar = 0;
  };

  speechSynthesis.speak(utterance);
}

function pause() {
  if (speechSynthesis.speaking) {
    speechSynthesis.pause();
    paused = true;
  }
}

function changeRate() {
  if (speechSynthesis.speaking) {
    speechSynthesis.cancel();
    play();
  }
}

function toggleText() {
  showText = !showText;
  document.getElementById("text").className = showText ? "text-box" : "text-box hidden";
}

function next() {
  speechSynthesis.cancel();
  index = (index + 1) % pages.length;
  currentChar = 0;
  render();
}

function prev() {
  speechSynthesis.cancel();
  index = (index - 1 + pages.length) % pages.length;
  currentChar = 0;
  render();
}

render();
</script>

</body>
</html>
